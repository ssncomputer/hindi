var that=this;function __skpm_run(e,t){that.context=t;var n=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t){e.exports=require("sketch")},function(e,t,n){"use strict";(function(t){var n=setTimeout;function r(){}function i(e){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function o(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,i._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(i){return void c(t.promise,i)}a(t.promise,r)}else(1===e._state?a:c)(t.promise,e._value)})):e._deferreds.push(t)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void s(e);if("function"==typeof n)return void l((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,s(e)}catch(a){c(e,a)}var r,o}function c(e,t){e._state=2,e._value=t,s(e)}function s(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function u(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,c(t,e))})}catch(r){if(n)return;n=!0,c(t,r)}}i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(r);return o(this,new u(e,t,n)),n},i.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})},i.all=function(e){return new i(function(t,n){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function o(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void c.call(a,function(t){o(e,t)},n)}r[e]=a,0==--i&&t(r)}catch(s){n(s)}}for(var a=0;a<r.length;a++)o(a,r[a])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},i._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){n(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},e.exports=i}).call(this,n(6).setImmediate)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=require("buffer")},function(e,t,n){"use strict";(function(e){var r=n(0),i=n.n(r);t.a=function(){return new e(function(e,t){i.a.UI.getInputFromUser("Remove.bg API Key",{description:"You can find your API key on https://www.remove.bg/profile#api-key.",okButton:"Save API Key"},function(n,r){return n?t(n):(i.a.Settings.setSettingForKey("api-key",r),e(r))})})}}).call(this,n(1))},function(e,t,n){"use strict";n.r(t),function(e,r,i){var o=n(0),a=n.n(o),c=n(4);function s(e,t){a.a.UI.message("Removing background...");var n=e.image.nsdata,o=new r;return o.append("image_file",{fileName:"image.png",mimeType:"image/png",data:n}),o.append("size","auto"),i("https://api.remove.bg/v1.0/removebg",{method:"POST",headers:{"X-API-Key":t},body:o}).then(function(e){return e.ok?e.blob():e.text().then(function(e){var t=e;try{var n=JSON.parse(t);n&&n.errors&&n.errors[0]&&(t=n.errors[0].title)}catch(r){}throw new Error(t)})}).then(function(t){e.image=t}).catch(function(e){console.error(e),a.a.UI.message("Error: ".concat(e.message))})}t.default=function(){var t=a.a.getSelectedDocument();if(t){var n,r=t.selectedLayers;if(r.length)(n=a.a.Settings.settingForKey("api-key"),n?e.resolve(n):Object(c.a)().catch(function(){})).then(function(e){e?r.forEach(function(t){if("Image"===t.type)return s(t,e);t.style&&t.style.fills.length&&t.style.fills.forEach(function(t){if("Pattern"===t.fill&&t.pattern&&"Fill"===t.pattern.patternType)return s(t.pattern,e)})}):a.a.UI.message("Please enter your Remove.bg API key first")});else a.a.UI.message("Please select an image first")}}}.call(this,n(1),n(9),n(11))},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(7),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(2))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,c,s=1,u={},l=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){h(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){o.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(h,0,e)}:(a="setImmediate$"+Math.random()+"$",c=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&h(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",c,!1):e.attachEvent("onmessage",c),r=function(t){e.postMessage(a+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[s]=i,r(s),s++},d.clearImmediate=p}function p(e){delete u[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{p(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(2),n(8))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var s,u=[],l=!1,f=-1;function d(){l&&s&&(l=!1,s.length?u=s.concat(u):f=-1,u.length&&p())}function p(){if(!l){var e=c(d);l=!0;for(var t=u.length;t;){for(s=u,u=[];++f<t;)s&&s[f].run();f=-1,t=u.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function y(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||c(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){var r,i;try{r=n(3).Buffer}catch(a){}try{i=n(10)}catch(a){}var o="Boundary-"+NSUUID.UUID().UUIDString();e.exports=function(){var e=NSMutableData.data();return{_boundary:o,_isFormData:!0,_data:e,append:function(t,n){if(e.appendData(NSString.alloc().initWithString("--"+o+"\r\n").dataUsingEncoding(NSUTF8StringEncoding)),e.appendData(NSString.alloc().initWithString('Content-Disposition: form-data; name="'+t+'"').dataUsingEncoding(NSUTF8StringEncoding)),i?i.isString(n):"string"==typeof n)e.appendData(NSString.alloc().initWithString("\r\n\r\n"+n).dataUsingEncoding(NSUTF8StringEncoding));else{if(!(n&&n.fileName&&n.data&&n.mimeType))throw new Error("unknown value type");var a;if(r&&r.isBuffer(n.data))a=n.data.toNSData();else{if(!n.data.isKindOfClass||1!=n.data.isKindOfClass(NSData))throw new Error("unknown data type");a=n.data}e.appendData(NSString.alloc().initWithString('; filename="'+n.fileName+'"\r\nContent-Type: '+n.mimeType+"\r\n\r\n").dataUsingEncoding(NSUTF8StringEncoding)),e.appendData(a)}e.appendData(NSString.alloc().initWithString("\r\n").dataUsingEncoding(NSUTF8StringEncoding))}}}},function(e,t){e.exports=require("util")},function(e,t,n){(function(t){var r,i,o=n(12).default;try{r=n(3).Buffer}catch(a){}e.exports=function(e,n){var c;n=n||{};try{c=coscript.createFiber()}catch(a){coscript.shouldKeepAround=!0}return new t(function(a,s){var u=NSURL.alloc().initWithString(e),l=NSMutableURLRequest.requestWithURL(u);if(l.setHTTPMethod(n.method||"GET"),Object.keys(n.headers||{}).forEach(function(e){l.setValue_forHTTPHeaderField(n.headers[e],e)}),n.body){var f;if("string"==typeof n.body)f=NSString.alloc().initWithString(n.body).dataUsingEncoding(NSUTF8StringEncoding);else if(r&&r.isBuffer(n.body))f=n.body.toNSData();else if(n.body.isKindOfClass&&1==n.body.isKindOfClass(NSData))f=n.body;else if(n.body._isFormData){var d=n.body._boundary;(f=n.body._data).appendData(NSString.alloc().initWithString("--"+d+"--\r\n").dataUsingEncoding(NSUTF8StringEncoding)),l.setValue_forHTTPHeaderField("multipart/form-data; boundary="+d,"Content-Type")}else f=NSJSONSerialization.dataWithJSONObject_options_error(n.body,NSJSONWritingPrettyPrinted,void 0),l.setValue_forHTTPHeaderField(""+f.length(),"Content-Length");l.setHTTPBody(f)}if(n.cache)switch(n.cache){case"reload":case"no-cache":case"no-store":l.setCachePolicy(1);case"force-cache":l.setCachePolicy(2);case"only-if-cached":l.setCachePolicy(3)}n.credentials||l.setHTTPShouldHandleCookies(!1),i||(i=o({classname:"FetchPolyfillDelegate",data:null,httpResponse:null,fiber:null,callbacks:null,"connectionDidFinishLoading:":function(e){this.callbacks.succeed(this.httpResponse,this.data),this.fiber?this.fiber.cleanup():coscript.shouldKeepAround=!1},"connection:didReceiveResponse:":function(e,t){this.httpResponse=t,this.data=NSMutableData.alloc().init()},"connection:didFailWithError:":function(e,t){this.callbacks.fail(t),this.fiber?this.fiber.cleanup():coscript.shouldKeepAround=!1},"connection:didReceiveData:":function(e,t){this.data.appendData(t)}}));var p=!1,h=i.new();h.callbacks=NSDictionary.dictionaryWithDictionary({succeed:function(e,n){p=!0,a(function e(n,i){for(var o,a=[],c=[],s={},u=0;u<n.allHeaderFields().allKeys().length;u++){var l=n.allHeaderFields().allKeys()[u].toLowerCase(),f=String(n.allHeaderFields()[l]);a.push(l),c.push([l,f]),o=s[l],s[l]=o?o+","+f:f}return{ok:1==(n.statusCode()/200|0),status:Number(n.statusCode()),statusText:NSHTTPURLResponse.localizedStringForStatusCode(n.statusCode()),useFinalURL:!0,url:String(n.URL().absoluteString()),clone:e.bind(this,n,i),text:function(){return new t(function(e,t){const n=NSString.alloc().initWithData_encoding(i,NSASCIIStringEncoding);n?e(n):t(new Error("Couldn't parse body"))})},json:function(){return new t(function(e,t){var n=NSString.alloc().initWithData_encoding(i,NSUTF8StringEncoding);n?e(JSON.parse(n)):t(new Error("Could not parse JSON because it is not valid UTF-8 data."))})},blob:function(){return t.resolve(i)},arrayBuffer:function(){return t.resolve(r.from(i))},headers:{keys:function(){return a},entries:function(){return c},get:function(e){return s[e.toLowerCase()]},has:function(e){return e.toLowerCase()in s}}}}(e,n))},fail:function(e){p=!0,s(e)}}),h.fiber=c;var y=NSURLConnection.alloc().initWithRequest_delegate(l,h);c&&c.onCleanup(function(){p||y.cancel()})})}}).call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SuperCall=void 0,t.default=function(e){const t=e.superclass||NSObject,n=(e.className||e.classname||"ObjCClass")+NSUUID.UUID().UUIDString(),o=new Set(["className","classname","superclass"]);var a=MOClassDescription.allocateDescriptionForClassWithName_superclass_(n,t);const c=[];for(var s in e){const t=e[s];if("function"==typeof t&&"init"!==s){var u=NSSelectorFromString(s);a.addInstanceMethodWithSelector_function_(u,t)}else o.has(s)||(c.push(s),a.addInstanceVariableWithName_typeEncoding(s,"@"))}return a.addInstanceMethodWithSelector_function_(NSSelectorFromString("init"),function(){const t=i.call(this);return c.map(n=>{Object.defineProperty(t,n,{get:()=>(function(e,t){const n=MOPointer.new();return(0,r.object_getInstanceVariable)(e,t,n),n.value().retain().autorelease()})(t,n),set(e){(0,r.object_setInstanceVariable)(t,n,e)}}),t[n]=e[n]}),"function"==typeof e.init&&e.init.call(this),t}),a.registerClass()};var r=n(13);t.SuperCall=r.SuperCall;const i=(0,r.SuperCall)(NSStringFromSelector("init"),[],{type:"@"})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SuperCall=function(e,t,n){const i=o("objc_msgSendSuper",[{type:"^"+r},{type:":"},...t],n);return function(...t){const n=(r=this,o=this.superclass(),function e(t){if("object"!=typeof t||0==Object.keys(t).length)return t;const n=Object.keys(t)[0],r=t[n],i=MOStruct.structureWithName_memberNames_runtime(n,Object.keys(r),Mocha.sharedRuntime());return Object.keys(r).map(t=>{i[t]=e(r[t])}),i}({objc_super:{receiver:r,super_class:o}}));var r,o;const a=MOPointer.alloc().initWithValue_(n);return i(a,e,...t)}},t.CFunc=o;const r='{objc_super="receiver"@"super_class"#}';function i(e,t){const n=NSMutableDictionary.dictionary();n.o=e,Object.keys(t).map(e=>n.setValue_forKeyPath(t[e],"o."+e))}function o(e,t,n){function r(e){if(!e)return null;const t=MOBridgeSupportArgument.alloc().init();return i(t,{type64:e.type}),t}const o=MOBridgeSupportFunction.alloc().init();return i(o,{name:e,arguments:t.map(r),returnValue:r(n)}),o}t.object_getInstanceVariable=o("object_getInstanceVariable",[{type:"@"},{type:"*"},{type:"^@"}],{type:"^{objc_ivar=}"}),t.object_setInstanceVariable=o("object_setInstanceVariable",[{type:"@"},{type:"*"},{type:"@"}],{type:"^{objc_ivar=}"});!function(e,t){const n=MOBridgeSupportController.sharedController().valueForKey("symbols");if(!n)throw Error("Something has changed within bridge support so we can't add our definitions");if(null!==n[e])return;const r=MOBridgeSupportStruct.alloc().init();i(r,{name:e,type:t.type}),n[e]=r}("objc_super",{type:r})}]);"default"===e&&"function"==typeof n?n(t):n[e](t)}that.onRun=__skpm_run.bind(this,"default");